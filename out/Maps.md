---
title     : "Maps: Total and Partial Maps"
layout    : page
permalink : /Maps
---

Maps (or dictionaries) are ubiquitous data structures, both in software
construction generally and in the theory of programming languages in particular;
we're going to need them in many places in the coming chapters.  They also make
a nice case study using ideas we've seen in previous chapters, including
building data structures out of higher-order functions (from [Basics]({{
"Basics" | relative_url }}) and [Poly]({{ "Poly" | relative_url }}) and the use
of reflection to streamline proofs (from [IndProp]({{ "IndProp" | relative_url
}})).

We'll define two flavors of maps: _total_ maps, which include a
"default" element to be returned when a key being looked up
doesn't exist, and _partial_ maps, which return an `Maybe` to
indicate success or failure.  The latter is defined in terms of
the former, using `nothing` as the default element.

## The Agda Standard Library

One small digression before we start.

Unlike the chapters we have seen so far, this one does not
import the chapter before it (and, transitively, all the
earlier chapters).  Instead, in this chapter and from now, on
we're going to import the definitions and theorems we need
directly from Agda's standard library.  You should not notice
much difference, though, because we've been careful to name our
own definitions and theorems the same as their counterparts in the
standard library, wherever they overlap.

<pre class="Agda">{% raw %}<a id="1490" class="Keyword">open</a> <a id="1495" class="Keyword">import</a> <a id="1502" href="https://agda.github.io/agda-stdlib/Data.Nat.html" class="Module">Data.Nat</a>         <a id="1519" class="Keyword">using</a> <a id="1525" class="Symbol">(</a><a id="1526" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a><a id="1527" class="Symbol">)</a>
<a id="1529" class="Keyword">open</a> <a id="1534" class="Keyword">import</a> <a id="1541" href="https://agda.github.io/agda-stdlib/Data.Empty.html" class="Module">Data.Empty</a>       <a id="1558" class="Keyword">using</a> <a id="1564" class="Symbol">(</a><a id="1565" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">⊥</a><a id="1566" class="Symbol">;</a> <a id="1568" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a><a id="1574" class="Symbol">)</a>
<a id="1576" class="Keyword">open</a> <a id="1581" class="Keyword">import</a> <a id="1588" href="https://agda.github.io/agda-stdlib/Data.Maybe.html" class="Module">Data.Maybe</a>       <a id="1605" class="Keyword">using</a> <a id="1611" class="Symbol">(</a><a id="1612" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#335" class="Datatype">Maybe</a><a id="1617" class="Symbol">;</a> <a id="1619" href="https://agda.github.io/agda-stdlib/Data.Maybe.html#1603" class="InductiveConstructor">just</a><a id="1623" class="Symbol">;</a> <a id="1625" href="https://agda.github.io/agda-stdlib/Data.Maybe.html#1664" class="InductiveConstructor">nothing</a><a id="1632" class="Symbol">)</a>
<a id="1634" class="Keyword">open</a> <a id="1639" class="Keyword">import</a> <a id="1646" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1663" class="Keyword">using</a> <a id="1669" class="Symbol">(</a><a id="1670" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬_</a><a id="1672" class="Symbol">;</a> <a id="1674" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#534" class="Datatype">Dec</a><a id="1677" class="Symbol">;</a> <a id="1679" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a><a id="1682" class="Symbol">;</a> <a id="1684" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a><a id="1686" class="Symbol">)</a>
<a id="1688" class="Keyword">open</a> <a id="1693" class="Keyword">import</a> <a id="1700" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
                             <a id="1767" class="Keyword">using</a> <a id="1773" class="Symbol">(</a><a id="1774" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a><a id="1777" class="Symbol">;</a> <a id="1779" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1783" class="Symbol">;</a> <a id="1785" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">_≢_</a><a id="1788" class="Symbol">;</a> <a id="1790" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#632" class="Function">trans</a><a id="1795" class="Symbol">;</a> <a id="1797" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a><a id="1800" class="Symbol">)</a>{% endraw %}</pre>

Documentation for the standard library can be found at
<https://agda.github.io/agda-stdlib/>.

## Identifiers

First, we need a type for the keys that we use to index into our
maps.  For this purpose, we again use the type `Id` from the
[Lists](sf/Lists.html) chapter.  To make this chapter self contained,
we repeat its definition here.

<pre class="Agda">{% raw %}<a id="2166" class="Keyword">data</a> <a id="Id"></a><a id="2171" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a> <a id="2174" class="Symbol">:</a> <a id="2176" class="PrimitiveType">Set</a> <a id="2180" class="Keyword">where</a>
  <a id="Id.id"></a><a id="2188" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2191" class="Symbol">:</a> <a id="2193" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="2195" class="Symbol">→</a> <a id="2197" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a>{% endraw %}</pre>

We recall a standard fact of logic.

<pre class="Agda">{% raw %}<a id="contrapositive"></a><a id="2262" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2262" class="Function">contrapositive</a> <a id="2277" class="Symbol">:</a> <a id="2279" class="Symbol">∀</a> <a id="2281" class="Symbol">{</a><a id="2282" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2282" class="Bound">ℓ₁</a> <a id="2285" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2285" class="Bound">ℓ₂</a><a id="2287" class="Symbol">}</a> <a id="2289" class="Symbol">{</a><a id="2290" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2290" class="Bound">P</a> <a id="2292" class="Symbol">:</a> <a id="2294" class="PrimitiveType">Set</a> <a id="2298" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2282" class="Bound">ℓ₁</a><a id="2300" class="Symbol">}</a> <a id="2302" class="Symbol">{</a><a id="2303" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2303" class="Bound">Q</a> <a id="2305" class="Symbol">:</a> <a id="2307" class="PrimitiveType">Set</a> <a id="2311" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2285" class="Bound">ℓ₂</a><a id="2313" class="Symbol">}</a> <a id="2315" class="Symbol">→</a> <a id="2317" class="Symbol">(</a><a id="2318" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2290" class="Bound">P</a> <a id="2320" class="Symbol">→</a> <a id="2322" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2303" class="Bound">Q</a><a id="2323" class="Symbol">)</a> <a id="2325" class="Symbol">→</a> <a id="2327" class="Symbol">(</a><a id="2328" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="2330" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2303" class="Bound">Q</a> <a id="2332" class="Symbol">→</a> <a id="2334" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="2336" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2290" class="Bound">P</a><a id="2337" class="Symbol">)</a>
<a id="2339" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2262" class="Function">contrapositive</a> <a id="2354" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2354" class="Bound">p→q</a> <a id="2358" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2358" class="Bound">¬q</a> <a id="2361" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2361" class="Bound">p</a> <a id="2363" class="Symbol">=</a> <a id="2365" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2358" class="Bound">¬q</a> <a id="2368" class="Symbol">(</a><a id="2369" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2354" class="Bound">p→q</a> <a id="2373" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2361" class="Bound">p</a><a id="2374" class="Symbol">)</a>{% endraw %}</pre>

Using the above, we can decide equality of two identifiers
by deciding equality on the underlying strings.

<pre class="Agda">{% raw %}<a id="_≟_"></a><a id="2509" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">_≟_</a> <a id="2513" class="Symbol">:</a> <a id="2515" class="Symbol">(</a><a id="2516" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2516" class="Bound">x</a> <a id="2518" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2518" class="Bound">y</a> <a id="2520" class="Symbol">:</a> <a id="2522" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="2524" class="Symbol">)</a> <a id="2526" class="Symbol">→</a> <a id="2528" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#534" class="Datatype">Dec</a> <a id="2532" class="Symbol">(</a><a id="2533" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2516" class="Bound">x</a> <a id="2535" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="2537" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2518" class="Bound">y</a><a id="2538" class="Symbol">)</a>
<a id="2540" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2543" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2543" class="Bound">x</a> <a id="2545" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="2547" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2550" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2550" class="Bound">y</a> <a id="2552" class="Keyword">with</a> <a id="2557" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2543" class="Bound">x</a> <a id="2559" href="https://agda.github.io/agda-stdlib/Data.Nat.Base.html#2869" class="Function Operator">Data.Nat.≟</a> <a id="2570" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2550" class="Bound">y</a>
<a id="2572" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2575" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2575" class="Bound">x</a> <a id="2577" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="2579" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2582" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2582" class="Bound">y</a> <a id="2584" class="Symbol">|</a> <a id="2586" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="2590" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>  <a id="2596" class="Symbol">=</a>  <a id="2599" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="2603" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="2608" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2611" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2611" class="Bound">x</a> <a id="2613" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="2615" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2618" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2618" class="Bound">y</a> <a id="2620" class="Symbol">|</a> <a id="2622" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="2626" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2626" class="Bound">x≢y</a>   <a id="2632" class="Symbol">=</a>  <a id="2635" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="2638" class="Symbol">(</a><a id="2639" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2262" class="Function">contrapositive</a> <a id="2654" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2678" class="Function">id-inj</a> <a id="2661" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2626" class="Bound">x≢y</a><a id="2664" class="Symbol">)</a>
  <a id="2668" class="Keyword">where</a>
    <a id="2678" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2678" class="Function">id-inj</a> <a id="2685" class="Symbol">:</a> <a id="2687" class="Symbol">∀</a> <a id="2689" class="Symbol">{</a><a id="2690" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2690" class="Bound">x</a> <a id="2692" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2692" class="Bound">y</a><a id="2693" class="Symbol">}</a> <a id="2695" class="Symbol">→</a> <a id="2697" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2700" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2690" class="Bound">x</a> <a id="2702" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="2704" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="2707" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2692" class="Bound">y</a> <a id="2709" class="Symbol">→</a> <a id="2711" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2690" class="Bound">x</a> <a id="2713" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="2715" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2692" class="Bound">y</a>
    <a id="2721" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2678" class="Function">id-inj</a> <a id="2728" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>  <a id="2734" class="Symbol">=</a>  <a id="2737" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>{% endraw %}</pre>

## Total Maps

Our main job in this chapter will be to build a definition of
partial maps that is similar in behavior to the one we saw in the
[Lists](sf/Lists.html) chapter, plus accompanying lemmas about their
behavior.

This time around, though, we're going to use _functions_, rather
than lists of key-value pairs, to build maps.  The advantage of
this representation is that it offers a more _extensional_ view of
maps, where two maps that respond to queries in the same way will
be represented as literally the same thing (the same function),
rather than just "equivalent" data structures.  This, in turn,
simplifies proofs that use maps.

We build partial maps in two steps.  First, we define a type of
_total maps_ that return a default value when we look up a key
that is not present in the map.

<pre class="Agda">{% raw %}<a id="TotalMap"></a><a id="3573" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="3582" class="Symbol">:</a> <a id="3584" class="PrimitiveType">Set</a> <a id="3588" class="Symbol">→</a> <a id="3590" class="PrimitiveType">Set</a>
<a id="3594" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="3603" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3603" class="Bound">A</a> <a id="3605" class="Symbol">=</a> <a id="3607" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a> <a id="3610" class="Symbol">→</a> <a id="3612" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3603" class="Bound">A</a>{% endraw %}</pre>

Intuitively, a total map over anﬁ element type `A` _is_ just a
function that can be used to look up ids, yielding `A`s.

<pre class="Agda">{% raw %}<a id="3760" class="Keyword">module</a> <a id="TotalMap"></a><a id="3767" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3767" class="Module">TotalMap</a> <a id="3776" class="Keyword">where</a>{% endraw %}</pre>

The function `always` yields a total map given a
default element; this map always returns the default element when
applied to any id.

<pre class="Agda">{% raw %}<a id="TotalMap.always"></a><a id="3944" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3944" class="Function">always</a> <a id="3951" class="Symbol">:</a> <a id="3953" class="Symbol">∀</a> <a id="3955" class="Symbol">{</a><a id="3956" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3956" class="Bound">A</a><a id="3957" class="Symbol">}</a> <a id="3959" class="Symbol">→</a> <a id="3961" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3956" class="Bound">A</a> <a id="3963" class="Symbol">→</a> <a id="3965" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="3974" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3956" class="Bound">A</a>
  <a id="3978" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3944" class="Function">always</a> <a id="3985" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3985" class="Bound">v</a> <a id="3987" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3987" class="Bound">x</a> <a id="3989" class="Symbol">=</a> <a id="3991" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3985" class="Bound">v</a>{% endraw %}</pre>

More interesting is the update function, which (as before) takes
a map `ρ`, a key `x`, and a value `v` and returns a new map that
takes `x` to `v` and takes every other key to whatever `ρ` does.

<pre class="Agda">{% raw %}<a id="4216" class="Keyword">infixl</a> <a id="4223" class="Number">15</a> <a id="4226" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">_,_↦_</a>  

  <a id="TotalMap._,_↦_"></a><a id="4237" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">_,_↦_</a> <a id="4243" class="Symbol">:</a> <a id="4245" class="Symbol">∀</a> <a id="4247" class="Symbol">{</a><a id="4248" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4248" class="Bound">A</a><a id="4249" class="Symbol">}</a> <a id="4251" class="Symbol">→</a> <a id="4253" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="4262" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4248" class="Bound">A</a> <a id="4264" class="Symbol">→</a> <a id="4266" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a> <a id="4269" class="Symbol">→</a> <a id="4271" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4248" class="Bound">A</a> <a id="4273" class="Symbol">→</a> <a id="4275" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="4284" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4248" class="Bound">A</a>
  <a id="4288" class="Symbol">(</a><a id="4289" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4289" class="Bound">ρ</a> <a id="4291" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="4293" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4293" class="Bound">x</a> <a id="4295" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="4297" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4297" class="Bound">v</a><a id="4298" class="Symbol">)</a> <a id="4300" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4300" class="Bound">y</a> <a id="4302" class="Keyword">with</a> <a id="4307" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4293" class="Bound">x</a> <a id="4309" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="4311" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4300" class="Bound">y</a>
  <a id="4315" class="Symbol">...</a> <a id="4319" class="Symbol">|</a> <a id="4321" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="4325" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4325" class="Bound">x≡y</a> <a id="4329" class="Symbol">=</a> <a id="4331" class="Bound">v</a>
  <a id="4335" class="Symbol">...</a> <a id="4339" class="Symbol">|</a> <a id="4341" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="4345" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4345" class="Bound">x≢y</a> <a id="4349" class="Symbol">=</a> <a id="4351" class="Bound">ρ</a> <a id="4353" class="Bound">y</a>{% endraw %}</pre>

This definition is a nice example of higher-order programming.
The update function takes a _function_ `ρ` and yields a new
function that behaves like the desired map.

For example, we can build a map taking ids to naturals, where `x`
maps to 42, `y` maps to 69, and every other key maps to 0, as follows:

<pre class="Agda">{% raw %}<a id="4688" class="Keyword">module</a> <a id="example"></a><a id="4695" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4695" class="Module">example</a> <a id="4703" class="Keyword">where</a>

    <a id="TotalMap.example.x"></a><a id="4714" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4714" class="Function">x</a> <a id="TotalMap.example.y"></a><a id="4716" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4716" class="Function">y</a> <a id="TotalMap.example.z"></a><a id="4718" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4718" class="Function">z</a> <a id="4720" class="Symbol">:</a> <a id="4722" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a>
    <a id="4729" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4714" class="Function">x</a> <a id="4731" class="Symbol">=</a> <a id="4733" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="4736" class="Number">0</a>
    <a id="4742" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4716" class="Function">y</a> <a id="4744" class="Symbol">=</a> <a id="4746" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="4749" class="Number">1</a>
    <a id="4755" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4718" class="Function">z</a> <a id="4757" class="Symbol">=</a> <a id="4759" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2188" class="InductiveConstructor">id</a> <a id="4762" class="Number">2</a>

    <a id="TotalMap.example.ρ₀"></a><a id="4769" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4769" class="Function">ρ₀</a> <a id="4772" class="Symbol">:</a> <a id="4774" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="4783" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a>
    <a id="4789" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4769" class="Function">ρ₀</a> <a id="4792" class="Symbol">=</a> <a id="4794" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3944" class="Function">always</a> <a id="4801" class="Number">0</a> <a id="4803" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="4805" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4714" class="Function">x</a> <a id="4807" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="4809" class="Number">42</a> <a id="4812" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="4814" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4716" class="Function">y</a> <a id="4816" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="4818" class="Number">69</a>

    <a id="TotalMap.example.test₁"></a><a id="4826" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4826" class="Function">test₁</a> <a id="4832" class="Symbol">:</a> <a id="4834" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4769" class="Function">ρ₀</a> <a id="4837" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4714" class="Function">x</a> <a id="4839" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="4841" class="Number">42</a>
    <a id="4848" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4826" class="Function">test₁</a> <a id="4854" class="Symbol">=</a> <a id="4856" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>

    <a id="TotalMap.example.test₂"></a><a id="4866" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4866" class="Function">test₂</a> <a id="4872" class="Symbol">:</a> <a id="4874" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4769" class="Function">ρ₀</a> <a id="4877" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4716" class="Function">y</a> <a id="4879" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="4881" class="Number">69</a>
    <a id="4888" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4866" class="Function">test₂</a> <a id="4894" class="Symbol">=</a> <a id="4896" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>

    <a id="TotalMap.example.test₃"></a><a id="4906" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4906" class="Function">test₃</a> <a id="4912" class="Symbol">:</a> <a id="4914" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4769" class="Function">ρ₀</a> <a id="4917" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4718" class="Function">z</a> <a id="4919" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="4921" class="Number">0</a>
    <a id="4927" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4906" class="Function">test₃</a> <a id="4933" class="Symbol">=</a> <a id="4935" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>{% endraw %}</pre>

This completes the definition of total maps.  Note that we don't
need to define a `find` operation because it is just function
application!

To use maps in later chapters, we'll need several fundamental
facts about how they behave.  Even if you don't work the following
exercises, make sure you understand the statements of
the lemmas!

#### Exercise: 1 star, optional (apply-always)
The `always` map returns its default element for all keys:

<pre class="Agda">{% raw %}<a id="5411" class="Keyword">postulate</a>
    <a id="TotalMap.apply-always"></a><a id="5425" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5425" class="Postulate">apply-always</a> <a id="5438" class="Symbol">:</a> <a id="5440" class="Symbol">∀</a> <a id="5442" class="Symbol">{</a><a id="5443" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5443" class="Bound">A</a><a id="5444" class="Symbol">}</a> <a id="5446" class="Symbol">(</a><a id="5447" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5447" class="Bound">v</a> <a id="5449" class="Symbol">:</a> <a id="5451" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5443" class="Bound">A</a><a id="5452" class="Symbol">)</a> <a id="5454" class="Symbol">(</a><a id="5455" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5455" class="Bound">x</a> <a id="5457" class="Symbol">:</a> <a id="5459" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="5461" class="Symbol">)</a> <a id="5463" class="Symbol">→</a> <a id="5465" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3944" class="Function">always</a> <a id="5472" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5447" class="Bound">v</a> <a id="5474" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5455" class="Bound">x</a> <a id="5476" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="5478" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5447" class="Bound">v</a>{% endraw %}</pre>

<div class="hidden">
<pre class="Agda">{% raw %}<a id="TotalMap.apply-always′"></a><a id="5528" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5528" class="Function">apply-always′</a> <a id="5542" class="Symbol">:</a> <a id="5544" class="Symbol">∀</a> <a id="5546" class="Symbol">{</a><a id="5547" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5547" class="Bound">A</a><a id="5548" class="Symbol">}</a> <a id="5550" class="Symbol">(</a><a id="5551" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5551" class="Bound">v</a> <a id="5553" class="Symbol">:</a> <a id="5555" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5547" class="Bound">A</a><a id="5556" class="Symbol">)</a> <a id="5558" class="Symbol">(</a><a id="5559" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5559" class="Bound">x</a> <a id="5561" class="Symbol">:</a> <a id="5563" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="5565" class="Symbol">)</a> <a id="5567" class="Symbol">→</a> <a id="5569" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3944" class="Function">always</a> <a id="5576" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5551" class="Bound">v</a> <a id="5578" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5559" class="Bound">x</a> <a id="5580" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="5582" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5551" class="Bound">v</a>
  <a id="5586" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5528" class="Function">apply-always′</a> <a id="5600" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5600" class="Bound">v</a> <a id="5602" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5602" class="Bound">x</a> <a id="5604" class="Symbol">=</a> <a id="5606" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>{% endraw %}</pre>
</div>

#### Exercise: 2 stars, optional (update-eq)
Next, if we update a map `ρ` at a key `x` with a new value `v`
and then look up `x` in the map resulting from the update, we get
back `v`:

<pre class="Agda">{% raw %}<a id="5830" class="Keyword">postulate</a>
    <a id="TotalMap.update-eq"></a><a id="5844" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5844" class="Postulate">update-eq</a> <a id="5854" class="Symbol">:</a> <a id="5856" class="Symbol">∀</a> <a id="5858" class="Symbol">{</a><a id="5859" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5859" class="Bound">A</a><a id="5860" class="Symbol">}</a> <a id="5862" class="Symbol">(</a><a id="5863" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5863" class="Bound">ρ</a> <a id="5865" class="Symbol">:</a> <a id="5867" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="5876" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5859" class="Bound">A</a><a id="5877" class="Symbol">)</a> <a id="5879" class="Symbol">(</a><a id="5880" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5880" class="Bound">x</a> <a id="5882" class="Symbol">:</a> <a id="5884" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="5886" class="Symbol">)</a> <a id="5888" class="Symbol">(</a><a id="5889" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5889" class="Bound">v</a> <a id="5891" class="Symbol">:</a> <a id="5893" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5859" class="Bound">A</a><a id="5894" class="Symbol">)</a>
              <a id="5910" class="Symbol">→</a> <a id="5912" class="Symbol">(</a><a id="5913" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5863" class="Bound">ρ</a> <a id="5915" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="5917" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5880" class="Bound">x</a> <a id="5919" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="5921" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5889" class="Bound">v</a><a id="5922" class="Symbol">)</a> <a id="5924" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5880" class="Bound">x</a> <a id="5926" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="5928" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5889" class="Bound">v</a>{% endraw %}</pre>

<div class="hidden">
<pre class="Agda">{% raw %}<a id="TotalMap.update-eq′"></a><a id="5978" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5978" class="Function">update-eq′</a> <a id="5989" class="Symbol">:</a> <a id="5991" class="Symbol">∀</a> <a id="5993" class="Symbol">{</a><a id="5994" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5994" class="Bound">A</a><a id="5995" class="Symbol">}</a> <a id="5997" class="Symbol">(</a><a id="5998" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5998" class="Bound">ρ</a> <a id="6000" class="Symbol">:</a> <a id="6002" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="6011" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5994" class="Bound">A</a><a id="6012" class="Symbol">)</a> <a id="6014" class="Symbol">(</a><a id="6015" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6015" class="Bound">x</a> <a id="6017" class="Symbol">:</a> <a id="6019" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="6021" class="Symbol">)</a> <a id="6023" class="Symbol">(</a><a id="6024" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6024" class="Bound">v</a> <a id="6026" class="Symbol">:</a> <a id="6028" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5994" class="Bound">A</a><a id="6029" class="Symbol">)</a>
             <a id="6044" class="Symbol">→</a> <a id="6046" class="Symbol">(</a><a id="6047" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5998" class="Bound">ρ</a> <a id="6049" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="6051" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6015" class="Bound">x</a> <a id="6053" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="6055" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6024" class="Bound">v</a><a id="6056" class="Symbol">)</a> <a id="6058" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6015" class="Bound">x</a> <a id="6060" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="6062" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6024" class="Bound">v</a>
  <a id="6066" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5978" class="Function">update-eq′</a> <a id="6077" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6077" class="Bound">ρ</a> <a id="6079" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6079" class="Bound">x</a> <a id="6081" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6081" class="Bound">v</a> <a id="6083" class="Keyword">with</a> <a id="6088" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6079" class="Bound">x</a> <a id="6090" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="6092" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6079" class="Bound">x</a>
  <a id="6096" class="Symbol">...</a> <a id="6100" class="Symbol">|</a> <a id="6102" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="6106" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6106" class="Bound">x≡x</a> <a id="6110" class="Symbol">=</a> <a id="6112" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
  <a id="6119" class="Symbol">...</a> <a id="6123" class="Symbol">|</a> <a id="6125" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="6129" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6129" class="Bound">x≢x</a> <a id="6133" class="Symbol">=</a> <a id="6135" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="6142" class="Symbol">(</a><a id="6143" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6129" class="Bound">x≢x</a> <a id="6147" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="6151" class="Symbol">)</a>{% endraw %}</pre>
</div>

#### Exercise: 2 stars, optional (update-neq)
On the other hand, if we update a map `m` at a key `x` and
then look up a _different_ key `y` in the resulting map, we get
the same result that `m` would have given:

<pre class="Agda">{% raw %}<a id="TotalMap.update-neq"></a><a id="6400" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="6411" class="Symbol">:</a> <a id="6413" class="Symbol">∀</a> <a id="6415" class="Symbol">{</a><a id="6416" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6416" class="Bound">A</a><a id="6417" class="Symbol">}</a> <a id="6419" class="Symbol">(</a><a id="6420" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6420" class="Bound">ρ</a> <a id="6422" class="Symbol">:</a> <a id="6424" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="6433" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6416" class="Bound">A</a><a id="6434" class="Symbol">)</a> <a id="6436" class="Symbol">(</a><a id="6437" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6437" class="Bound">x</a> <a id="6439" class="Symbol">:</a> <a id="6441" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="6443" class="Symbol">)</a> <a id="6445" class="Symbol">(</a><a id="6446" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6446" class="Bound">v</a> <a id="6448" class="Symbol">:</a> <a id="6450" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6416" class="Bound">A</a><a id="6451" class="Symbol">)</a> <a id="6453" class="Symbol">(</a><a id="6454" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6454" class="Bound">y</a> <a id="6456" class="Symbol">:</a> <a id="6458" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="6460" class="Symbol">)</a>
             <a id="6475" class="Symbol">→</a> <a id="6477" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6437" class="Bound">x</a> <a id="6479" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">≢</a> <a id="6481" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6454" class="Bound">y</a> <a id="6483" class="Symbol">→</a> <a id="6485" class="Symbol">(</a><a id="6486" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6420" class="Bound">ρ</a> <a id="6488" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="6490" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6437" class="Bound">x</a> <a id="6492" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="6494" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6446" class="Bound">v</a><a id="6495" class="Symbol">)</a> <a id="6497" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6454" class="Bound">y</a> <a id="6499" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="6501" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6420" class="Bound">ρ</a> <a id="6503" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6454" class="Bound">y</a>
  <a id="6507" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="6518" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6518" class="Bound">ρ</a> <a id="6520" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6520" class="Bound">x</a> <a id="6522" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6522" class="Bound">v</a> <a id="6524" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6524" class="Bound">y</a> <a id="6526" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6526" class="Bound">x≢y</a> <a id="6530" class="Keyword">with</a> <a id="6535" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6520" class="Bound">x</a> <a id="6537" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="6539" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6524" class="Bound">y</a>
  <a id="6543" class="Symbol">...</a> <a id="6547" class="Symbol">|</a> <a id="6549" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="6553" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6553" class="Bound">x≡y</a> <a id="6557" class="Symbol">=</a> <a id="6559" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="6566" class="Symbol">(</a><a id="6567" class="Bound">x≢y</a> <a id="6571" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6553" class="Bound">x≡y</a><a id="6574" class="Symbol">)</a>
  <a id="6578" class="Symbol">...</a> <a id="6582" class="Symbol">|</a> <a id="6584" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="6588" class="Symbol">_</a>   <a id="6592" class="Symbol">=</a> <a id="6594" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>{% endraw %}</pre>

For the following lemmas, since maps are represented by functions, to
show two maps equal we will need to postulate extensionality.

<pre class="Agda">{% raw %}<a id="6759" class="Keyword">postulate</a>
    <a id="TotalMap.extensionality"></a><a id="6773" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6773" class="Postulate">extensionality</a> <a id="6788" class="Symbol">:</a> <a id="6790" class="Symbol">∀</a> <a id="6792" class="Symbol">{</a><a id="6793" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6793" class="Bound">A</a> <a id="6795" class="Symbol">:</a> <a id="6797" class="PrimitiveType">Set</a><a id="6800" class="Symbol">}</a> <a id="6802" class="Symbol">{</a><a id="6803" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6803" class="Bound">ρ</a> <a id="6805" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6805" class="Bound">ρ′</a> <a id="6808" class="Symbol">:</a> <a id="6810" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="6819" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6793" class="Bound">A</a><a id="6820" class="Symbol">}</a> <a id="6822" class="Symbol">→</a> <a id="6824" class="Symbol">(∀</a> <a id="6827" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6827" class="Bound">x</a> <a id="6829" class="Symbol">→</a> <a id="6831" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6803" class="Bound">ρ</a> <a id="6833" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6827" class="Bound">x</a> <a id="6835" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="6837" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6805" class="Bound">ρ′</a> <a id="6840" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6827" class="Bound">x</a><a id="6841" class="Symbol">)</a> <a id="6843" class="Symbol">→</a> <a id="6845" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6803" class="Bound">ρ</a> <a id="6847" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="6849" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6805" class="Bound">ρ′</a>{% endraw %}</pre>

#### Exercise: 2 stars, optional (update-shadow)
If we update a map `ρ` at a key `x` with a value `v` and then
update again with the same key `x` and another value `w`, the
resulting map behaves the same (gives the same result when applied
to any key) as the simpler map obtained by performing just
the second update on `ρ`:

<pre class="Agda">{% raw %}<a id="7205" class="Keyword">postulate</a>
    <a id="TotalMap.update-shadow"></a><a id="7219" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7219" class="Postulate">update-shadow</a> <a id="7233" class="Symbol">:</a> <a id="7235" class="Symbol">∀</a> <a id="7237" class="Symbol">{</a><a id="7238" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7238" class="Bound">A</a><a id="7239" class="Symbol">}</a> <a id="7241" class="Symbol">(</a><a id="7242" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7242" class="Bound">ρ</a> <a id="7244" class="Symbol">:</a> <a id="7246" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="7255" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7238" class="Bound">A</a><a id="7256" class="Symbol">)</a> <a id="7258" class="Symbol">(</a><a id="7259" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7259" class="Bound">x</a> <a id="7261" class="Symbol">:</a> <a id="7263" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="7265" class="Symbol">)</a> <a id="7267" class="Symbol">(</a><a id="7268" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7268" class="Bound">v</a> <a id="7270" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7270" class="Bound">w</a> <a id="7272" class="Symbol">:</a> <a id="7274" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7238" class="Bound">A</a><a id="7275" class="Symbol">)</a> 
                  <a id="7296" class="Symbol">→</a> <a id="7298" class="Symbol">(</a><a id="7299" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7242" class="Bound">ρ</a> <a id="7301" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7303" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7259" class="Bound">x</a> <a id="7305" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7307" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7268" class="Bound">v</a> <a id="7309" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7311" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7259" class="Bound">x</a> <a id="7313" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7315" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7270" class="Bound">w</a><a id="7316" class="Symbol">)</a> <a id="7318" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="7320" class="Symbol">(</a><a id="7321" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7242" class="Bound">ρ</a> <a id="7323" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7325" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7259" class="Bound">x</a> <a id="7327" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7329" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7270" class="Bound">w</a><a id="7330" class="Symbol">)</a>{% endraw %}</pre>

<div class="hidden">
<pre class="Agda">{% raw %}<a id="TotalMap.update-shadow′"></a><a id="7380" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7380" class="Function">update-shadow′</a> <a id="7395" class="Symbol">:</a>  <a id="7398" class="Symbol">∀</a> <a id="7400" class="Symbol">{</a><a id="7401" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7401" class="Bound">A</a><a id="7402" class="Symbol">}</a> <a id="7404" class="Symbol">(</a><a id="7405" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7405" class="Bound">ρ</a> <a id="7407" class="Symbol">:</a> <a id="7409" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="7418" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7401" class="Bound">A</a><a id="7419" class="Symbol">)</a> <a id="7421" class="Symbol">(</a><a id="7422" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7422" class="Bound">x</a> <a id="7424" class="Symbol">:</a> <a id="7426" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="7428" class="Symbol">)</a> <a id="7430" class="Symbol">(</a><a id="7431" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7431" class="Bound">v</a> <a id="7433" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7433" class="Bound">w</a> <a id="7435" class="Symbol">:</a> <a id="7437" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7401" class="Bound">A</a><a id="7438" class="Symbol">)</a> 
                  <a id="7459" class="Symbol">→</a> <a id="7461" class="Symbol">((</a><a id="7463" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7405" class="Bound">ρ</a> <a id="7465" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7467" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7422" class="Bound">x</a> <a id="7469" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7471" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7431" class="Bound">v</a><a id="7472" class="Symbol">)</a> <a id="7474" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7476" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7422" class="Bound">x</a> <a id="7478" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7480" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7433" class="Bound">w</a><a id="7481" class="Symbol">)</a> <a id="7483" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="7485" class="Symbol">(</a><a id="7486" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7405" class="Bound">ρ</a> <a id="7488" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7490" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7422" class="Bound">x</a> <a id="7492" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7494" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7433" class="Bound">w</a><a id="7495" class="Symbol">)</a>
  <a id="7499" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7380" class="Function">update-shadow′</a> <a id="7514" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7514" class="Bound">ρ</a> <a id="7516" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7516" class="Bound">x</a> <a id="7518" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7518" class="Bound">v</a> <a id="7520" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7520" class="Bound">w</a> <a id="7522" class="Symbol">=</a> <a id="7524" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6773" class="Postulate">extensionality</a> <a id="7539" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7559" class="Function">lemma</a>
    <a id="7549" class="Keyword">where</a>
    <a id="7559" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7559" class="Function">lemma</a> <a id="7565" class="Symbol">:</a> <a id="7567" class="Symbol">∀</a> <a id="7569" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7569" class="Bound">y</a> <a id="7571" class="Symbol">→</a> <a id="7573" class="Symbol">((</a><a id="7575" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7514" class="Bound">ρ</a> <a id="7577" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7579" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7516" class="Bound">x</a> <a id="7581" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7583" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7518" class="Bound">v</a><a id="7584" class="Symbol">)</a> <a id="7586" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7588" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7516" class="Bound">x</a> <a id="7590" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7592" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7520" class="Bound">w</a><a id="7593" class="Symbol">)</a> <a id="7595" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7569" class="Bound">y</a> <a id="7597" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="7599" class="Symbol">(</a><a id="7600" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7514" class="Bound">ρ</a> <a id="7602" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="7604" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7516" class="Bound">x</a> <a id="7606" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="7608" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7520" class="Bound">w</a><a id="7609" class="Symbol">)</a> <a id="7611" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7569" class="Bound">y</a>
    <a id="7617" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7559" class="Function">lemma</a> <a id="7623" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7623" class="Bound">y</a> <a id="7625" class="Keyword">with</a> <a id="7630" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7516" class="Bound">x</a> <a id="7632" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="7634" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7623" class="Bound">y</a>
    <a id="7640" class="Symbol">...</a> <a id="7644" class="Symbol">|</a> <a id="7646" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="7650" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="7655" class="Symbol">=</a> <a id="7657" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
    <a id="7666" class="Symbol">...</a> <a id="7670" class="Symbol">|</a> <a id="7672" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="7676" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7676" class="Bound">x≢y</a>  <a id="7681" class="Symbol">=</a> <a id="7683" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="7694" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7514" class="Bound">ρ</a> <a id="7696" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7516" class="Bound">x</a> <a id="7698" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7518" class="Bound">v</a> <a id="7700" class="Bound">y</a> <a id="7702" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7676" class="Bound">x≢y</a>{% endraw %}</pre>
</div>

#### Exercise: 2 stars (update-same)
Prove the following theorem, which states that if we update a map `ρ` to
assign key `x` the same value as it already has in `ρ`, then the
result is equal to `ρ`:

<pre class="Agda">{% raw %}<a id="7940" class="Keyword">postulate</a>
    <a id="TotalMap.update-same"></a><a id="7954" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7954" class="Postulate">update-same</a> <a id="7966" class="Symbol">:</a> <a id="7968" class="Symbol">∀</a> <a id="7970" class="Symbol">{</a><a id="7971" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7971" class="Bound">A</a><a id="7972" class="Symbol">}</a> <a id="7974" class="Symbol">(</a><a id="7975" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7975" class="Bound">ρ</a> <a id="7977" class="Symbol">:</a> <a id="7979" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="7988" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7971" class="Bound">A</a><a id="7989" class="Symbol">)</a> <a id="7991" class="Symbol">(</a><a id="7992" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7992" class="Bound">x</a> <a id="7994" class="Symbol">:</a> <a id="7996" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="7998" class="Symbol">)</a> <a id="8000" class="Symbol">→</a> <a id="8002" class="Symbol">(</a><a id="8003" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7975" class="Bound">ρ</a> <a id="8005" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8007" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7992" class="Bound">x</a> <a id="8009" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8011" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7975" class="Bound">ρ</a> <a id="8013" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7992" class="Bound">x</a><a id="8014" class="Symbol">)</a> <a id="8016" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8018" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7975" class="Bound">ρ</a>{% endraw %}</pre>

<div class="hidden">
<pre class="Agda">{% raw %}<a id="TotalMap.update-same′"></a><a id="8068" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8068" class="Function">update-same′</a> <a id="8081" class="Symbol">:</a> <a id="8083" class="Symbol">∀</a> <a id="8085" class="Symbol">{</a><a id="8086" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8086" class="Bound">A</a><a id="8087" class="Symbol">}</a> <a id="8089" class="Symbol">(</a><a id="8090" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8090" class="Bound">ρ</a> <a id="8092" class="Symbol">:</a> <a id="8094" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="8103" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8086" class="Bound">A</a><a id="8104" class="Symbol">)</a> <a id="8106" class="Symbol">(</a><a id="8107" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8107" class="Bound">x</a> <a id="8109" class="Symbol">:</a> <a id="8111" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="8113" class="Symbol">)</a> <a id="8115" class="Symbol">→</a> <a id="8117" class="Symbol">(</a><a id="8118" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8090" class="Bound">ρ</a> <a id="8120" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8122" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8107" class="Bound">x</a> <a id="8124" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8126" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8090" class="Bound">ρ</a> <a id="8128" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8107" class="Bound">x</a><a id="8129" class="Symbol">)</a> <a id="8131" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8133" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8090" class="Bound">ρ</a>
  <a id="8137" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8068" class="Function">update-same′</a> <a id="8150" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8150" class="Bound">ρ</a> <a id="8152" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8152" class="Bound">x</a>  <a id="8155" class="Symbol">=</a>  <a id="8158" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6773" class="Postulate">extensionality</a> <a id="8173" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8193" class="Function">lemma</a>
    <a id="8183" class="Keyword">where</a>
    <a id="8193" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8193" class="Function">lemma</a> <a id="8199" class="Symbol">:</a> <a id="8201" class="Symbol">∀</a> <a id="8203" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8203" class="Bound">y</a> <a id="8205" class="Symbol">→</a> <a id="8207" class="Symbol">(</a><a id="8208" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8150" class="Bound">ρ</a> <a id="8210" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8212" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8152" class="Bound">x</a> <a id="8214" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8216" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8150" class="Bound">ρ</a> <a id="8218" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8152" class="Bound">x</a><a id="8219" class="Symbol">)</a> <a id="8221" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8203" class="Bound">y</a> <a id="8223" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8225" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8150" class="Bound">ρ</a> <a id="8227" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8203" class="Bound">y</a>
    <a id="8233" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8193" class="Function">lemma</a> <a id="8239" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8239" class="Bound">y</a> <a id="8241" class="Keyword">with</a> <a id="8246" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8152" class="Bound">x</a> <a id="8248" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="8250" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8239" class="Bound">y</a>
    <a id="8256" class="Symbol">...</a> <a id="8260" class="Symbol">|</a> <a id="8262" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="8266" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="8271" class="Symbol">=</a> <a id="8273" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
    <a id="8282" class="Symbol">...</a> <a id="8286" class="Symbol">|</a> <a id="8288" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="8292" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8292" class="Bound">x≢y</a>  <a id="8297" class="Symbol">=</a> <a id="8299" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>{% endraw %}</pre>
</div>

#### Exercise: 3 stars, recommended (update-permute)
Prove one final property of the `update` function: If we update a map
`m` at two distinct keys, it doesn't matter in which order we do the
updates.

<pre class="Agda">{% raw %}<a id="8540" class="Keyword">postulate</a>
    <a id="TotalMap.update-permute"></a><a id="8554" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8554" class="Postulate">update-permute</a> <a id="8569" class="Symbol">:</a> <a id="8571" class="Symbol">∀</a> <a id="8573" class="Symbol">{</a><a id="8574" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8574" class="Bound">A</a><a id="8575" class="Symbol">}</a> <a id="8577" class="Symbol">(</a><a id="8578" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8578" class="Bound">ρ</a> <a id="8580" class="Symbol">:</a> <a id="8582" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="8591" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8574" class="Bound">A</a><a id="8592" class="Symbol">)</a> <a id="8594" class="Symbol">(</a><a id="8595" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8595" class="Bound">x</a> <a id="8597" class="Symbol">:</a> <a id="8599" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="8601" class="Symbol">)</a> <a id="8603" class="Symbol">(</a><a id="8604" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8604" class="Bound">v</a> <a id="8606" class="Symbol">:</a> <a id="8608" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8574" class="Bound">A</a><a id="8609" class="Symbol">)</a> <a id="8611" class="Symbol">(</a><a id="8612" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8612" class="Bound">y</a> <a id="8614" class="Symbol">:</a> <a id="8616" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="8618" class="Symbol">)</a> <a id="8620" class="Symbol">(</a><a id="8621" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8621" class="Bound">w</a> <a id="8623" class="Symbol">:</a> <a id="8625" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8574" class="Bound">A</a><a id="8626" class="Symbol">)</a>
                   <a id="8647" class="Symbol">→</a> <a id="8649" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8595" class="Bound">x</a> <a id="8651" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">≢</a> <a id="8653" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8612" class="Bound">y</a> <a id="8655" class="Symbol">→</a> <a id="8657" class="Symbol">(</a><a id="8658" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8578" class="Bound">ρ</a> <a id="8660" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8662" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8595" class="Bound">x</a> <a id="8664" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8666" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8604" class="Bound">v</a> <a id="8668" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8670" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8612" class="Bound">y</a> <a id="8672" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8674" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8621" class="Bound">w</a><a id="8675" class="Symbol">)</a> <a id="8677" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8679" class="Symbol">(</a><a id="8680" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8578" class="Bound">ρ</a> <a id="8682" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8684" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8612" class="Bound">y</a> <a id="8686" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8688" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8621" class="Bound">w</a> <a id="8690" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8692" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8595" class="Bound">x</a> <a id="8694" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8696" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8604" class="Bound">v</a><a id="8697" class="Symbol">)</a>{% endraw %}</pre>

<div class="hidden">
<pre class="Agda">{% raw %}<a id="TotalMap.update-permute′"></a><a id="8747" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8747" class="Function">update-permute′</a> <a id="8763" class="Symbol">:</a> <a id="8765" class="Symbol">∀</a> <a id="8767" class="Symbol">{</a><a id="8768" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8768" class="Bound">A</a><a id="8769" class="Symbol">}</a> <a id="8771" class="Symbol">(</a><a id="8772" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8772" class="Bound">ρ</a> <a id="8774" class="Symbol">:</a> <a id="8776" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="8785" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8768" class="Bound">A</a><a id="8786" class="Symbol">)</a> <a id="8788" class="Symbol">(</a><a id="8789" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8789" class="Bound">x</a> <a id="8791" class="Symbol">:</a> <a id="8793" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="8795" class="Symbol">)</a> <a id="8797" class="Symbol">(</a><a id="8798" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8798" class="Bound">v</a> <a id="8800" class="Symbol">:</a> <a id="8802" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8768" class="Bound">A</a><a id="8803" class="Symbol">)</a> <a id="8805" class="Symbol">(</a><a id="8806" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8806" class="Bound">y</a> <a id="8808" class="Symbol">:</a> <a id="8810" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="8812" class="Symbol">)</a> <a id="8814" class="Symbol">(</a><a id="8815" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8815" class="Bound">w</a> <a id="8817" class="Symbol">:</a> <a id="8819" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8768" class="Bound">A</a><a id="8820" class="Symbol">)</a>
                   <a id="8841" class="Symbol">→</a> <a id="8843" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8789" class="Bound">x</a> <a id="8845" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">≢</a> <a id="8847" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8806" class="Bound">y</a> <a id="8849" class="Symbol">→</a> <a id="8851" class="Symbol">(</a><a id="8852" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8772" class="Bound">ρ</a> <a id="8854" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8856" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8789" class="Bound">x</a> <a id="8858" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8860" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8798" class="Bound">v</a> <a id="8862" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8864" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8806" class="Bound">y</a> <a id="8866" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8868" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8815" class="Bound">w</a><a id="8869" class="Symbol">)</a> <a id="8871" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8873" class="Symbol">(</a><a id="8874" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8772" class="Bound">ρ</a> <a id="8876" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8878" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8806" class="Bound">y</a> <a id="8880" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8882" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8815" class="Bound">w</a> <a id="8884" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8886" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8789" class="Bound">x</a> <a id="8888" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8890" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8798" class="Bound">v</a><a id="8891" class="Symbol">)</a>
  <a id="8895" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8747" class="Function">update-permute′</a> <a id="8911" class="Symbol">{</a><a id="8912" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8912" class="Bound">A</a><a id="8913" class="Symbol">}</a> <a id="8915" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="8917" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8917" class="Bound">x</a> <a id="8919" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8919" class="Bound">v</a> <a id="8921" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8921" class="Bound">y</a> <a id="8923" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8923" class="Bound">w</a> <a id="8925" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8925" class="Bound">x≢y</a>  <a id="8930" class="Symbol">=</a>  <a id="8933" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6773" class="Postulate">extensionality</a> <a id="8948" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8968" class="Function">lemma</a>
    <a id="8958" class="Keyword">where</a>
    <a id="8968" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8968" class="Function">lemma</a> <a id="8974" class="Symbol">:</a> <a id="8976" class="Symbol">∀</a> <a id="8978" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8978" class="Bound">z</a> <a id="8980" class="Symbol">→</a> <a id="8982" class="Symbol">(</a><a id="8983" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="8985" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8987" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8917" class="Bound">x</a> <a id="8989" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8991" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8919" class="Bound">v</a> <a id="8993" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="8995" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8921" class="Bound">y</a> <a id="8997" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="8999" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8923" class="Bound">w</a><a id="9000" class="Symbol">)</a> <a id="9002" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8978" class="Bound">z</a> <a id="9004" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9006" class="Symbol">(</a><a id="9007" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="9009" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="9011" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8921" class="Bound">y</a> <a id="9013" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="9015" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8923" class="Bound">w</a> <a id="9017" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="9019" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8917" class="Bound">x</a> <a id="9021" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="9023" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8919" class="Bound">v</a><a id="9024" class="Symbol">)</a> <a id="9026" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8978" class="Bound">z</a>
    <a id="9032" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8968" class="Function">lemma</a> <a id="9038" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9038" class="Bound">z</a> <a id="9040" class="Keyword">with</a> <a id="9045" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8917" class="Bound">x</a> <a id="9047" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="9049" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9038" class="Bound">z</a> <a id="9051" class="Symbol">|</a> <a id="9053" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8921" class="Bound">y</a> <a id="9055" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="9057" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9038" class="Bound">z</a>
    <a id="9063" class="Symbol">...</a> <a id="9067" class="Symbol">|</a> <a id="9069" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9073" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="9078" class="Symbol">|</a> <a id="9080" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9084" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>  <a id="9090" class="Symbol">=</a>  <a id="9093" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="9100" class="Symbol">(</a><a id="9101" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8925" class="Bound">x≢y</a> <a id="9105" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="9109" class="Symbol">)</a>
    <a id="9115" class="Symbol">...</a> <a id="9119" class="Symbol">|</a> <a id="9121" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9125" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9125" class="Bound">x≢z</a>  <a id="9130" class="Symbol">|</a> <a id="9132" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9136" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>  <a id="9142" class="Symbol">=</a>  <a id="9145" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a> <a id="9149" class="Symbol">(</a><a id="9150" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5978" class="Function">update-eq′</a> <a id="9161" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="9163" class="Bound">z</a> <a id="9165" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8923" class="Bound">w</a><a id="9166" class="Symbol">)</a>
    <a id="9172" class="Symbol">...</a> <a id="9176" class="Symbol">|</a> <a id="9178" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9182" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="9187" class="Symbol">|</a> <a id="9189" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9193" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9193" class="Bound">y≢z</a>   <a id="9199" class="Symbol">=</a>  <a id="9202" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5978" class="Function">update-eq′</a> <a id="9213" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="9215" class="Bound">z</a> <a id="9217" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8919" class="Bound">v</a>
    <a id="9223" class="Symbol">...</a> <a id="9227" class="Symbol">|</a> <a id="9229" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9233" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9233" class="Bound">x≢z</a>  <a id="9238" class="Symbol">|</a> <a id="9240" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9244" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9244" class="Bound">y≢z</a>   <a id="9250" class="Symbol">=</a>  <a id="9253" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#632" class="Function">trans</a> <a id="9259" class="Symbol">(</a><a id="9260" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="9271" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="9273" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8917" class="Bound">x</a> <a id="9275" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8919" class="Bound">v</a> <a id="9277" class="Bound">z</a> <a id="9279" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9233" class="Bound">x≢z</a><a id="9282" class="Symbol">)</a> <a id="9284" class="Symbol">(</a><a id="9285" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a> <a id="9289" class="Symbol">(</a><a id="9290" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="9301" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8915" class="Bound">ρ</a> <a id="9303" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8921" class="Bound">y</a> <a id="9305" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8923" class="Bound">w</a> <a id="9307" class="Bound">z</a> <a id="9309" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9244" class="Bound">y≢z</a><a id="9312" class="Symbol">))</a>{% endraw %}</pre>

And a slightly different version of the same proof.

<pre class="Agda">{% raw %}<a id="TotalMap.update-permute′′"></a><a id="9399" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9399" class="Function">update-permute′′</a> <a id="9416" class="Symbol">:</a> <a id="9418" class="Symbol">∀</a> <a id="9420" class="Symbol">{</a><a id="9421" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9421" class="Bound">A</a><a id="9422" class="Symbol">}</a> <a id="9424" class="Symbol">(</a><a id="9425" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9425" class="Bound">ρ</a> <a id="9427" class="Symbol">:</a> <a id="9429" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="9438" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9421" class="Bound">A</a><a id="9439" class="Symbol">)</a> <a id="9441" class="Symbol">(</a><a id="9442" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9442" class="Bound">x</a> <a id="9444" class="Symbol">:</a> <a id="9446" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="9448" class="Symbol">)</a> <a id="9450" class="Symbol">(</a><a id="9451" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9451" class="Bound">v</a> <a id="9453" class="Symbol">:</a> <a id="9455" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9421" class="Bound">A</a><a id="9456" class="Symbol">)</a> <a id="9458" class="Symbol">(</a><a id="9459" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9459" class="Bound">y</a> <a id="9461" class="Symbol">:</a> <a id="9463" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="9465" class="Symbol">)</a> <a id="9467" class="Symbol">(</a><a id="9468" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9468" class="Bound">w</a> <a id="9470" class="Symbol">:</a> <a id="9472" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9421" class="Bound">A</a><a id="9473" class="Symbol">)</a> <a id="9475" class="Symbol">(</a><a id="9476" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9476" class="Bound">z</a> <a id="9478" class="Symbol">:</a> <a id="9480" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="9482" class="Symbol">)</a>
                   <a id="9503" class="Symbol">→</a> <a id="9505" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9442" class="Bound">x</a> <a id="9507" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">≢</a> <a id="9509" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9459" class="Bound">y</a> <a id="9511" class="Symbol">→</a> <a id="9513" class="Symbol">(</a><a id="9514" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9425" class="Bound">ρ</a> <a id="9516" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="9518" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9442" class="Bound">x</a> <a id="9520" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="9522" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9451" class="Bound">v</a> <a id="9524" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="9526" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9459" class="Bound">y</a> <a id="9528" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="9530" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9468" class="Bound">w</a><a id="9531" class="Symbol">)</a> <a id="9533" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9476" class="Bound">z</a> <a id="9535" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9537" class="Symbol">(</a><a id="9538" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9425" class="Bound">ρ</a> <a id="9540" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="9542" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9459" class="Bound">y</a> <a id="9544" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="9546" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9468" class="Bound">w</a> <a id="9548" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">,</a> <a id="9550" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9442" class="Bound">x</a> <a id="9552" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">↦</a> <a id="9554" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9451" class="Bound">v</a><a id="9555" class="Symbol">)</a> <a id="9557" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9476" class="Bound">z</a>
  <a id="9561" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9399" class="Function">update-permute′′</a> <a id="9578" class="Symbol">{</a><a id="9579" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9579" class="Bound">A</a><a id="9580" class="Symbol">}</a> <a id="9582" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9582" class="Bound">ρ</a> <a id="9584" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9584" class="Bound">x</a> <a id="9586" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9586" class="Bound">v</a> <a id="9588" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9588" class="Bound">y</a> <a id="9590" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9590" class="Bound">w</a> <a id="9592" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9592" class="Bound">z</a> <a id="9594" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9594" class="Bound">x≢y</a> <a id="9598" class="Keyword">with</a> <a id="9603" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9584" class="Bound">x</a> <a id="9605" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="9607" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9592" class="Bound">z</a> <a id="9609" class="Symbol">|</a> <a id="9611" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9588" class="Bound">y</a> <a id="9613" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2509" class="Function Operator">≟</a> <a id="9615" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9592" class="Bound">z</a>
  <a id="9619" class="Symbol">...</a> <a id="9623" class="Symbol">|</a> <a id="9625" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9629" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9629" class="Bound">x≡z</a> <a id="9633" class="Symbol">|</a> <a id="9635" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9639" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9639" class="Bound">y≡z</a> <a id="9643" class="Symbol">=</a> <a id="9645" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="9652" class="Symbol">(</a><a id="9653" class="Bound">x≢y</a> <a id="9657" class="Symbol">(</a><a id="9658" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#632" class="Function">trans</a> <a id="9664" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9629" class="Bound">x≡z</a> <a id="9668" class="Symbol">(</a><a id="9669" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a> <a id="9673" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9639" class="Bound">y≡z</a><a id="9676" class="Symbol">)))</a>
  <a id="9682" class="Symbol">...</a> <a id="9686" class="Symbol">|</a> <a id="9688" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9692" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9692" class="Bound">x≢z</a> <a id="9696" class="Symbol">|</a> <a id="9698" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9702" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9702" class="Bound">y≡z</a> <a id="9706" class="Keyword">rewrite</a> <a id="9714" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9702" class="Bound">y≡z</a>  <a id="9719" class="Symbol">=</a>  <a id="9722" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a> <a id="9726" class="Symbol">(</a><a id="9727" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5978" class="Function">update-eq′</a> <a id="9738" class="Bound">ρ</a> <a id="9740" class="Bound">z</a> <a id="9742" class="Bound">w</a><a id="9743" class="Symbol">)</a>  
  <a id="9749" class="Symbol">...</a> <a id="9753" class="Symbol">|</a> <a id="9755" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="9759" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9759" class="Bound">x≡z</a> <a id="9763" class="Symbol">|</a> <a id="9765" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9769" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9769" class="Bound">y≢z</a> <a id="9773" class="Keyword">rewrite</a> <a id="9781" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9759" class="Bound">x≡z</a>  <a id="9786" class="Symbol">=</a>  <a id="9789" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5978" class="Function">update-eq′</a> <a id="9800" class="Bound">ρ</a> <a id="9802" class="Bound">z</a> <a id="9804" class="Bound">v</a>
  <a id="9808" class="Symbol">...</a> <a id="9812" class="Symbol">|</a> <a id="9814" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9818" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9818" class="Bound">x≢z</a> <a id="9822" class="Symbol">|</a> <a id="9824" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a>  <a id="9828" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9828" class="Bound">y≢z</a>  <a id="9833" class="Symbol">=</a>  <a id="9836" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#632" class="Function">trans</a> <a id="9842" class="Symbol">(</a><a id="9843" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="9854" class="Bound">ρ</a> <a id="9856" class="Bound">x</a> <a id="9858" class="Bound">v</a> <a id="9860" class="Bound">z</a> <a id="9862" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9818" class="Bound">x≢z</a><a id="9865" class="Symbol">)</a> <a id="9867" class="Symbol">(</a><a id="9868" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a> <a id="9872" class="Symbol">(</a><a id="9873" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">update-neq</a> <a id="9884" class="Bound">ρ</a> <a id="9886" class="Bound">y</a> <a id="9888" class="Bound">w</a> <a id="9890" class="Bound">z</a> <a id="9892" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#9828" class="Bound">y≢z</a><a id="9895" class="Symbol">))</a>{% endraw %}</pre>
</div>

## Partial maps

Finally, we define _partial maps_ on top of total maps.  A partial
map with elements of type `A` is simply a total map with elements
of type `Maybe A` and default element `nothing`.

<pre class="Agda">{% raw %}<a id="PartialMap"></a><a id="10132" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10143" class="Symbol">:</a> <a id="10145" class="PrimitiveType">Set</a> <a id="10149" class="Symbol">→</a> <a id="10151" class="PrimitiveType">Set</a>
<a id="10155" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10166" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10166" class="Bound">A</a> <a id="10168" class="Symbol">=</a> <a id="10170" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3573" class="Function">TotalMap</a> <a id="10179" class="Symbol">(</a><a id="10180" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="10186" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10166" class="Bound">A</a><a id="10187" class="Symbol">)</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="10214" class="Keyword">module</a> <a id="PartialMap"></a><a id="10221" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10221" class="Module">PartialMap</a> <a id="10232" class="Keyword">where</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="PartialMap.∅"></a><a id="10265" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10265" class="Function">∅</a> <a id="10267" class="Symbol">:</a> <a id="10269" class="Symbol">∀</a> <a id="10271" class="Symbol">{</a><a id="10272" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10272" class="Bound">A</a><a id="10273" class="Symbol">}</a> <a id="10275" class="Symbol">→</a> <a id="10277" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10288" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10272" class="Bound">A</a>
  <a id="10292" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10265" class="Function">∅</a> <a id="10294" class="Symbol">=</a> <a id="10296" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#3944" class="Function">TotalMap.always</a> <a id="10312" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="10347" class="Keyword">infixl</a> <a id="10354" class="Number">15</a> <a id="10357" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">_,_↦_</a>  

  <a id="PartialMap._,_↦_"></a><a id="10368" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">_,_↦_</a> <a id="10374" class="Symbol">:</a> <a id="10376" class="Symbol">∀</a> <a id="10378" class="Symbol">{</a><a id="10379" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10379" class="Bound">A</a><a id="10380" class="Symbol">}</a> <a id="10382" class="Symbol">(</a><a id="10383" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10383" class="Bound">ρ</a> <a id="10385" class="Symbol">:</a> <a id="10387" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10398" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10379" class="Bound">A</a><a id="10399" class="Symbol">)</a> <a id="10401" class="Symbol">(</a><a id="10402" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10402" class="Bound">x</a> <a id="10404" class="Symbol">:</a> <a id="10406" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="10408" class="Symbol">)</a> <a id="10410" class="Symbol">(</a><a id="10411" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10411" class="Bound">v</a> <a id="10413" class="Symbol">:</a> <a id="10415" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10379" class="Bound">A</a><a id="10416" class="Symbol">)</a> <a id="10418" class="Symbol">→</a> <a id="10420" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10431" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10379" class="Bound">A</a>
  <a id="10435" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10435" class="Bound">ρ</a> <a id="10437" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="10439" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10439" class="Bound">x</a> <a id="10441" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="10443" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10443" class="Bound">v</a> <a id="10445" class="Symbol">=</a> <a id="10447" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#4237" class="Function Operator">TotalMap._,_↦_</a> <a id="10462" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10435" class="Bound">ρ</a> <a id="10464" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10439" class="Bound">x</a> <a id="10466" class="Symbol">(</a><a id="10467" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="10472" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10443" class="Bound">v</a><a id="10473" class="Symbol">)</a>{% endraw %}</pre>

We now lift all of the basic lemmas about total maps to partial maps.

<pre class="Agda">{% raw %}<a id="PartialMap.apply-∅"></a><a id="10573" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10573" class="Function">apply-∅</a> <a id="10581" class="Symbol">:</a> <a id="10583" class="Symbol">∀</a> <a id="10585" class="Symbol">{</a><a id="10586" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10586" class="Bound">A</a><a id="10587" class="Symbol">}</a> <a id="10589" class="Symbol">→</a> <a id="10591" class="Symbol">(</a><a id="10592" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10592" class="Bound">x</a> <a id="10594" class="Symbol">:</a> <a id="10596" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="10598" class="Symbol">)</a> <a id="10600" class="Symbol">→</a> <a id="10602" class="Symbol">(</a><a id="10603" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10265" class="Function">∅</a> <a id="10605" class="Symbol">{</a><a id="10606" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10586" class="Bound">A</a><a id="10607" class="Symbol">}</a> <a id="10609" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10592" class="Bound">x</a><a id="10610" class="Symbol">)</a> <a id="10612" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="10614" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a>
  <a id="10624" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10573" class="Function">apply-∅</a> <a id="10632" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10632" class="Bound">x</a>  <a id="10635" class="Symbol">=</a> <a id="10637" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5425" class="Postulate">TotalMap.apply-always</a> <a id="10659" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a> <a id="10667" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10632" class="Bound">x</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="PartialMap.update-eq"></a><a id="10696" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10696" class="Function">update-eq</a> <a id="10706" class="Symbol">:</a> <a id="10708" class="Symbol">∀</a> <a id="10710" class="Symbol">{</a><a id="10711" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10711" class="Bound">A</a><a id="10712" class="Symbol">}</a> <a id="10714" class="Symbol">(</a><a id="10715" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10715" class="Bound">ρ</a> <a id="10717" class="Symbol">:</a> <a id="10719" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10730" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10711" class="Bound">A</a><a id="10731" class="Symbol">)</a> <a id="10733" class="Symbol">(</a><a id="10734" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10734" class="Bound">x</a> <a id="10736" class="Symbol">:</a> <a id="10738" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="10740" class="Symbol">)</a> <a id="10742" class="Symbol">(</a><a id="10743" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10743" class="Bound">v</a> <a id="10745" class="Symbol">:</a> <a id="10747" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10711" class="Bound">A</a><a id="10748" class="Symbol">)</a>
            <a id="10762" class="Symbol">→</a> <a id="10764" class="Symbol">(</a><a id="10765" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10715" class="Bound">ρ</a> <a id="10767" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="10769" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10734" class="Bound">x</a> <a id="10771" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="10773" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10743" class="Bound">v</a><a id="10774" class="Symbol">)</a> <a id="10776" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10734" class="Bound">x</a> <a id="10778" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="10780" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="10785" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10743" class="Bound">v</a>
  <a id="10789" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10696" class="Function">update-eq</a> <a id="10799" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10799" class="Bound">ρ</a> <a id="10801" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10801" class="Bound">x</a> <a id="10803" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10803" class="Bound">v</a> <a id="10805" class="Symbol">=</a> <a id="10807" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#5844" class="Postulate">TotalMap.update-eq</a> <a id="10826" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10799" class="Bound">ρ</a> <a id="10828" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10801" class="Bound">x</a> <a id="10830" class="Symbol">(</a><a id="10831" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="10836" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10803" class="Bound">v</a><a id="10837" class="Symbol">)</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="PartialMap.update-neq"></a><a id="10866" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10866" class="Function">update-neq</a> <a id="10877" class="Symbol">:</a> <a id="10879" class="Symbol">∀</a> <a id="10881" class="Symbol">{</a><a id="10882" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10882" class="Bound">A</a><a id="10883" class="Symbol">}</a> <a id="10885" class="Symbol">(</a><a id="10886" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10886" class="Bound">ρ</a> <a id="10888" class="Symbol">:</a> <a id="10890" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="10901" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10882" class="Bound">A</a><a id="10902" class="Symbol">)</a> <a id="10904" class="Symbol">(</a><a id="10905" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10905" class="Bound">x</a> <a id="10907" class="Symbol">:</a> <a id="10909" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="10911" class="Symbol">)</a> <a id="10913" class="Symbol">(</a><a id="10914" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10914" class="Bound">v</a> <a id="10916" class="Symbol">:</a> <a id="10918" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10882" class="Bound">A</a><a id="10919" class="Symbol">)</a> <a id="10921" class="Symbol">(</a><a id="10922" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10922" class="Bound">y</a> <a id="10924" class="Symbol">:</a> <a id="10926" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="10928" class="Symbol">)</a>
             <a id="10943" class="Symbol">→</a> <a id="10945" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10905" class="Bound">x</a> <a id="10947" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">≢</a> <a id="10949" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10922" class="Bound">y</a> <a id="10951" class="Symbol">→</a> <a id="10953" class="Symbol">(</a><a id="10954" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10886" class="Bound">ρ</a> <a id="10956" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="10958" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10905" class="Bound">x</a> <a id="10960" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="10962" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10914" class="Bound">v</a><a id="10963" class="Symbol">)</a> <a id="10965" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10922" class="Bound">y</a> <a id="10967" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="10969" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10886" class="Bound">ρ</a> <a id="10971" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10922" class="Bound">y</a>
  <a id="10975" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10866" class="Function">update-neq</a> <a id="10986" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10986" class="Bound">ρ</a> <a id="10988" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10988" class="Bound">x</a> <a id="10990" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10990" class="Bound">v</a> <a id="10992" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10992" class="Bound">y</a> <a id="10994" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10994" class="Bound">x≢y</a> <a id="10998" class="Symbol">=</a> <a id="11000" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#6400" class="Function">TotalMap.update-neq</a> <a id="11020" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10986" class="Bound">ρ</a> <a id="11022" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10988" class="Bound">x</a> <a id="11024" class="Symbol">(</a><a id="11025" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11030" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10990" class="Bound">v</a><a id="11031" class="Symbol">)</a> <a id="11033" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10992" class="Bound">y</a> <a id="11035" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10994" class="Bound">x≢y</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="PartialMap.update-shadow"></a><a id="11066" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11066" class="Function">update-shadow</a> <a id="11080" class="Symbol">:</a> <a id="11082" class="Symbol">∀</a> <a id="11084" class="Symbol">{</a><a id="11085" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11085" class="Bound">A</a><a id="11086" class="Symbol">}</a> <a id="11088" class="Symbol">(</a><a id="11089" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11089" class="Bound">ρ</a> <a id="11091" class="Symbol">:</a> <a id="11093" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="11104" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11085" class="Bound">A</a><a id="11105" class="Symbol">)</a> <a id="11107" class="Symbol">(</a><a id="11108" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11108" class="Bound">x</a> <a id="11110" class="Symbol">:</a> <a id="11112" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="11114" class="Symbol">)</a> <a id="11116" class="Symbol">(</a><a id="11117" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11117" class="Bound">v</a> <a id="11119" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11119" class="Bound">w</a> <a id="11121" class="Symbol">:</a> <a id="11123" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11085" class="Bound">A</a><a id="11124" class="Symbol">)</a> 
                <a id="11143" class="Symbol">→</a> <a id="11145" class="Symbol">(</a><a id="11146" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11089" class="Bound">ρ</a> <a id="11148" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11150" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11108" class="Bound">x</a> <a id="11152" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11154" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11117" class="Bound">v</a> <a id="11156" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11158" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11108" class="Bound">x</a> <a id="11160" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11162" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11119" class="Bound">w</a><a id="11163" class="Symbol">)</a> <a id="11165" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11167" class="Symbol">(</a><a id="11168" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11089" class="Bound">ρ</a> <a id="11170" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11172" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11108" class="Bound">x</a> <a id="11174" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11176" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11119" class="Bound">w</a><a id="11177" class="Symbol">)</a>
  <a id="11181" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11066" class="Function">update-shadow</a> <a id="11195" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11195" class="Bound">ρ</a> <a id="11197" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11197" class="Bound">x</a> <a id="11199" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11199" class="Bound">v</a> <a id="11201" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11201" class="Bound">w</a> <a id="11203" class="Symbol">=</a> <a id="11205" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7219" class="Postulate">TotalMap.update-shadow</a> <a id="11228" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11195" class="Bound">ρ</a> <a id="11230" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11197" class="Bound">x</a> <a id="11232" class="Symbol">(</a><a id="11233" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11238" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11199" class="Bound">v</a><a id="11239" class="Symbol">)</a> <a id="11241" class="Symbol">(</a><a id="11242" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11247" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11201" class="Bound">w</a><a id="11248" class="Symbol">)</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="PartialMap.update-same"></a><a id="11277" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11277" class="Function">update-same</a> <a id="11289" class="Symbol">:</a> <a id="11291" class="Symbol">∀</a> <a id="11293" class="Symbol">{</a><a id="11294" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11294" class="Bound">A</a><a id="11295" class="Symbol">}</a> <a id="11297" class="Symbol">(</a><a id="11298" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11298" class="Bound">ρ</a> <a id="11300" class="Symbol">:</a> <a id="11302" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="11313" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11294" class="Bound">A</a><a id="11314" class="Symbol">)</a> <a id="11316" class="Symbol">(</a><a id="11317" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11317" class="Bound">x</a> <a id="11319" class="Symbol">:</a> <a id="11321" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="11323" class="Symbol">)</a> <a id="11325" class="Symbol">(</a><a id="11326" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11326" class="Bound">v</a> <a id="11328" class="Symbol">:</a> <a id="11330" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11294" class="Bound">A</a><a id="11331" class="Symbol">)</a> 
              <a id="11348" class="Symbol">→</a> <a id="11350" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11298" class="Bound">ρ</a> <a id="11352" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11317" class="Bound">x</a> <a id="11354" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11356" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11361" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11326" class="Bound">v</a>
              <a id="11377" class="Symbol">→</a> <a id="11379" class="Symbol">(</a><a id="11380" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11298" class="Bound">ρ</a> <a id="11382" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11384" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11317" class="Bound">x</a> <a id="11386" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11388" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11326" class="Bound">v</a><a id="11389" class="Symbol">)</a> <a id="11391" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11393" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11298" class="Bound">ρ</a>
  <a id="11397" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11277" class="Function">update-same</a> <a id="11409" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11409" class="Bound">ρ</a> <a id="11411" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11411" class="Bound">x</a> <a id="11413" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11413" class="Bound">v</a> <a id="11415" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11415" class="Bound">ρx≡v</a> <a id="11420" class="Keyword">rewrite</a> <a id="11428" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#565" class="Function">sym</a> <a id="11432" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11415" class="Bound">ρx≡v</a> <a id="11437" class="Symbol">=</a> <a id="11439" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#7954" class="Postulate">TotalMap.update-same</a> <a id="11460" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11409" class="Bound">ρ</a> <a id="11462" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11411" class="Bound">x</a>{% endraw %}</pre>

<pre class="Agda">{% raw %}<a id="PartialMap.update-permute"></a><a id="11491" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11491" class="Function">update-permute</a> <a id="11506" class="Symbol">:</a> <a id="11508" class="Symbol">∀</a> <a id="11510" class="Symbol">{</a><a id="11511" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11511" class="Bound">A</a><a id="11512" class="Symbol">}</a> <a id="11514" class="Symbol">(</a><a id="11515" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11515" class="Bound">ρ</a> <a id="11517" class="Symbol">:</a> <a id="11519" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10132" class="Function">PartialMap</a> <a id="11530" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11511" class="Bound">A</a><a id="11531" class="Symbol">)</a> <a id="11533" class="Symbol">(</a><a id="11534" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11534" class="Bound">x</a> <a id="11536" class="Symbol">:</a> <a id="11538" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="11540" class="Symbol">)</a> <a id="11542" class="Symbol">(</a><a id="11543" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11543" class="Bound">v</a> <a id="11545" class="Symbol">:</a> <a id="11547" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11511" class="Bound">A</a><a id="11548" class="Symbol">)</a> <a id="11550" class="Symbol">(</a><a id="11551" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11551" class="Bound">y</a> <a id="11553" class="Symbol">:</a> <a id="11555" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#2171" class="Datatype">Id</a><a id="11557" class="Symbol">)</a> <a id="11559" class="Symbol">(</a><a id="11560" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11560" class="Bound">w</a> <a id="11562" class="Symbol">:</a> <a id="11564" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11511" class="Bound">A</a><a id="11565" class="Symbol">)</a> 
                 <a id="11585" class="Symbol">→</a> <a id="11587" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11534" class="Bound">x</a> <a id="11589" href="https://agda.github.io/agda-stdlib/Relation.Binary.Core.html#4493" class="Function Operator">≢</a> <a id="11591" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11551" class="Bound">y</a> <a id="11593" class="Symbol">→</a> <a id="11595" class="Symbol">(</a><a id="11596" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11515" class="Bound">ρ</a> <a id="11598" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11600" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11534" class="Bound">x</a> <a id="11602" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11604" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11543" class="Bound">v</a> <a id="11606" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11608" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11551" class="Bound">y</a> <a id="11610" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11612" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11560" class="Bound">w</a><a id="11613" class="Symbol">)</a> <a id="11615" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11617" class="Symbol">(</a><a id="11618" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11515" class="Bound">ρ</a> <a id="11620" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11622" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11551" class="Bound">y</a> <a id="11624" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11626" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11560" class="Bound">w</a> <a id="11628" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">,</a> <a id="11630" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11534" class="Bound">x</a> <a id="11632" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#10368" class="Function Operator">↦</a> <a id="11634" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11543" class="Bound">v</a><a id="11635" class="Symbol">)</a>
  <a id="11639" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11491" class="Function">update-permute</a> <a id="11654" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11654" class="Bound">ρ</a> <a id="11656" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11656" class="Bound">x</a> <a id="11658" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11658" class="Bound">v</a> <a id="11660" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11660" class="Bound">y</a> <a id="11662" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11662" class="Bound">w</a> <a id="11664" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11664" class="Bound">x≢y</a> <a id="11668" class="Symbol">=</a> <a id="11670" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#8554" class="Postulate">TotalMap.update-permute</a> <a id="11694" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11654" class="Bound">ρ</a> <a id="11696" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11656" class="Bound">x</a> <a id="11698" class="Symbol">(</a><a id="11699" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11704" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11658" class="Bound">v</a><a id="11705" class="Symbol">)</a> <a id="11707" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11660" class="Bound">y</a> <a id="11709" class="Symbol">(</a><a id="11710" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11715" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11662" class="Bound">w</a><a id="11716" class="Symbol">)</a> <a id="11718" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11664" class="Bound">x≢y</a>{% endraw %}</pre>

We will also need the following basic facts about the `Maybe` type.

<pre class="Agda">{% raw %}<a id="PartialMap.just≢nothing"></a><a id="11818" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11818" class="Function">just≢nothing</a> <a id="11831" class="Symbol">:</a> <a id="11833" class="Symbol">∀</a> <a id="11835" class="Symbol">{</a><a id="11836" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11836" class="Bound">X</a> <a id="11838" class="Symbol">:</a> <a id="11840" class="PrimitiveType">Set</a><a id="11843" class="Symbol">}</a> <a id="11845" class="Symbol">→</a> <a id="11847" class="Symbol">∀</a> <a id="11849" class="Symbol">{</a><a id="11850" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11850" class="Bound">x</a> <a id="11852" class="Symbol">:</a> <a id="11854" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11836" class="Bound">X</a><a id="11855" class="Symbol">}</a> <a id="11857" class="Symbol">→</a> <a id="11859" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="11861" class="Symbol">(</a><a id="11862" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a> <a id="11866" class="Symbol">{</a><a id="11867" class="Argument">A</a> <a id="11869" class="Symbol">=</a> <a id="11871" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="11877" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11836" class="Bound">X</a><a id="11878" class="Symbol">}</a> <a id="11880" class="Symbol">(</a><a id="11881" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11886" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11850" class="Bound">x</a><a id="11887" class="Symbol">)</a> <a id="11889" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#403" class="InductiveConstructor">nothing</a><a id="11896" class="Symbol">)</a>
  <a id="11900" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11818" class="Function">just≢nothing</a> <a id="11913" class="Symbol">()</a>

  <a id="PartialMap.just-injective"></a><a id="11919" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11919" class="Function">just-injective</a> <a id="11934" class="Symbol">:</a> <a id="11936" class="Symbol">∀</a> <a id="11938" class="Symbol">{</a><a id="11939" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11939" class="Bound">X</a> <a id="11941" class="Symbol">:</a> <a id="11943" class="PrimitiveType">Set</a><a id="11946" class="Symbol">}</a> <a id="11948" class="Symbol">{</a><a id="11949" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11949" class="Bound">x</a> <a id="11951" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11951" class="Bound">y</a> <a id="11953" class="Symbol">:</a> <a id="11955" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11939" class="Bound">X</a><a id="11956" class="Symbol">}</a> <a id="11958" class="Symbol">→</a> <a id="11960" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a> <a id="11964" class="Symbol">{</a><a id="11965" class="Argument">A</a> <a id="11967" class="Symbol">=</a> <a id="11969" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#335" class="Datatype">Maybe</a> <a id="11975" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11939" class="Bound">X</a><a id="11976" class="Symbol">}</a> <a id="11978" class="Symbol">(</a><a id="11979" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11984" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11949" class="Bound">x</a><a id="11985" class="Symbol">)</a> <a id="11987" class="Symbol">(</a><a id="11988" href="https://agda.github.io/agda-stdlib/Data.Maybe.Base.html#373" class="InductiveConstructor">just</a> <a id="11993" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11951" class="Bound">y</a><a id="11994" class="Symbol">)</a> <a id="11996" class="Symbol">→</a> <a id="11998" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11949" class="Bound">x</a> <a id="12000" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12002" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11951" class="Bound">y</a>
  <a id="12006" href="{% endraw %}{{ site.baseurl }}{% link out/Maps.md %}{% raw %}#11919" class="Function">just-injective</a> <a id="12021" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="12026" class="Symbol">=</a> <a id="12028" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>{% endraw %}</pre>
